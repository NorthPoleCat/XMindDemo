# XMindDemo

XMind iOS招聘作业Demo，实现一个简易的思维导图，这里一共提供了两种实现

## 1. js + Canvas

完全由Canvas绘制的思维导图，实现以下功能：

- 自适应内容高度的节点
- 添加/修改节点
- 删除节点，一共提供了两种方式：
  1. 删除该节点及其下所有子节点
  2. 仅删除该节点，该节点下的所有子节点归于其父节点
- 拖拽改变思维导图结构，一样是两种方式：
  1. 拖拽该节点和其下所有子节点
  2. 仅拖拽该节点，该节点下的子节点归属该节点的父节点
 
**此种实现的优点**:

高效的绘制能力，能承载庞大的思维导图，灵活可自定义的节点

**此种实现的缺点**:

复杂的高度计算及Canvas的绘制方式导致代码难以拓展并有大量的edge case，当前Node的绘制函数并没有模块化，虽然有显示差异化节点的潜力，但并未实现

**现存的bug**:

1. 在拖拽节点时，有某种情况会导致画面乱掉，但是很遗憾我并没有准确定位出那种情况。如果发现思维导图乱掉了，请点击左侧的**clean cache**进行重置
2. 右键单击节点会弹出操作选项，但是在非全屏时，弹出位置有时会产生偏移，请尽量在全屏状态下测试

## 2. swiftUI

利用native实现的固定节点高度的思维导图，因 增/删/改 的实现与Canvas并无不同，所以并未重复实现。

**此种实现的优点**:

优秀的用户体验，简洁易读的代码

**此种实现的缺点**:

更高的开销，在节点过多时可能会有性能问题。固定的节点高度失去了差异化节点的能力，利用offset的方式来定位节点导致拖拽的实现非常困难（这个可以通过改成计算绝对高度的方式绘制节点来解决，但这样其实就跟canvas版差不多了，并没有利用原生组件的优势）

**现存的bug**:

暂无
